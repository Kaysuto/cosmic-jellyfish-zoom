{"version":3,"file":"RequestModal-Dh-rgp6A.js","sources":["../../node_modules/lucide-react/dist/esm/icons/bookmark.js","../../node_modules/lucide-react/dist/esm/icons/star.js","../../src/hooks/useUserList.ts","../../src/components/catalog/MediaCard.tsx","../../src/hooks/useRequestStatus.ts","../../src/components/catalog/RequestModal.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bookmark = createLucideIcon(\"Bookmark\", [\n  [\"path\", { d: \"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z\", key: \"1fy3hk\" }]\n]);\n\nexport { Bookmark as default };\n//# sourceMappingURL=bookmark.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"path\",\n    {\n      d: \"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z\",\n      key: \"r04s7s\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useSession } from '@/contexts/AuthContext';\r\nimport { showError, showSuccess } from '@/utils/toast';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ntype ListType = 'favorite' | 'watchlist';\r\n\r\nexport const useUserList = (listType: ListType) => {\r\n  const { session } = useSession();\r\n  const { t } = useTranslation();\r\n  const [list, setList] = useState<Set<string>>(new Set());\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchList = useCallback(async () => {\r\n    if (!session?.user) return;\r\n    setLoading(true);\r\n    const { data, error } = await supabase\r\n      .from('user_media_list')\r\n      .select('media_id, media_type')\r\n      .eq('user_id', session.user.id)\r\n      .eq('list_type', listType);\r\n    \r\n    if (error) {\r\n      showError(t('error_fetching_list'));\r\n    } else {\r\n      const newList = new Set(data.map(item => `${item.media_type}:${item.media_id}`));\r\n      setList(newList);\r\n    }\r\n    setLoading(false);\r\n  }, [session, listType, t]);\r\n\r\n  useEffect(() => {\r\n    fetchList();\r\n  }, [fetchList]);\r\n\r\n  const addToList = async (mediaId: number, mediaType: 'movie' | 'tv' | 'anime') => {\r\n    if (!session?.user) {\r\n      showError(t('must_be_logged_in'));\r\n      return;\r\n    }\r\n    const key = `${mediaType}:${mediaId}`;\r\n    if (list.has(key)) return;\r\n\r\n    const { error } = await supabase.from('user_media_list').insert({\r\n      user_id: session.user.id,\r\n      media_id: mediaId,\r\n      media_type: mediaType,\r\n      list_type: listType,\r\n    });\r\n\r\n    if (error) {\r\n      showError(t('error_adding_to_list'));\r\n    } else {\r\n      setList(prevList => new Set(prevList).add(key));\r\n      showSuccess(t('added_to_list'));\r\n    }\r\n  };\r\n\r\n  const removeFromList = async (mediaId: number, mediaType: 'movie' | 'tv' | 'anime') => {\r\n    if (!session?.user) {\r\n      showError(t('must_be_logged_in'));\r\n      return;\r\n    }\r\n    const key = `${mediaType}:${mediaId}`;\r\n    if (!list.has(key)) return;\r\n\r\n    const { error } = await supabase\r\n      .from('user_media_list')\r\n      .delete()\r\n      .eq('user_id', session.user.id)\r\n      .eq('media_id', mediaId)\r\n      .eq('media_type', mediaType)\r\n      .eq('list_type', listType);\r\n\r\n    if (error) {\r\n      showError(t('error_removing_from_list'));\r\n    } else {\r\n      setList(prevList => {\r\n        const newList = new Set(prevList);\r\n        newList.delete(key);\r\n        return newList;\r\n      });\r\n      showSuccess(t('removed_from_list'));\r\n    }\r\n  };\r\n\r\n  const isInList = (mediaId: number, mediaType: 'movie' | 'tv' | 'anime') => {\r\n    return list.has(`${mediaType}:${mediaId}`);\r\n  };\r\n\r\n  return { list, loading, addToList, removeFromList, isInList, refetch: fetchList };\r\n};","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Card } from '@/components/ui/card';\nimport { Film, Star, Plus, Check, Heart, Bookmark, Hourglass, X } from 'lucide-react';\nimport { useUserList } from '@/hooks/useUserList';\nimport { useSession } from '@/contexts/AuthContext';\nimport { useTranslation } from 'react-i18next';\nimport type { MediaItem } from './MediaGrid';\nimport { useJellyfin } from '@/contexts/JellyfinContext';\nimport { Badge } from '@/components/ui/badge';\nimport { motion } from 'framer-motion';\nimport { cn } from '@/lib/utils';\n\ninterface MediaCardProps {\n  item: MediaItem;\n  showRequestButton?: boolean;\n  onRequest?: (item: MediaItem) => void;\n  searchTerm?: string;\n  progress?: number;\n  playUrl?: string;\n  playbackPositionTicks?: number;\n  runtimeTicks?: number;\n  showRemoveButton?: boolean;\n  onRemove?: (item: MediaItem) => void;\n}\n  \nconst MediaCard: React.FC<MediaCardProps> = ({ \n  item, \n  showRequestButton = true, \n  onRequest, \n  searchTerm, \n  progress, \n  playUrl, \n  playbackPositionTicks, \n  showRemoveButton, \n  onRemove \n}) => {\n  const { t } = useTranslation();\n  const { jellyfinUrl } = useJellyfin();\n  const { session } = useSession();\n  \n  const { addToList: addToFavorites, removeFromList: removeFromFavorites, isInList: isInFavorites } = useUserList('favorite');\n  const { addToList: addToWatchlist, removeFromList: removeFromWatchlist, isInList: isInWatchlist } = useUserList('watchlist');\n  \n  const title = item.title || item.name || 'No title';\n  const releaseDate = item.release_date || item.first_air_date;\n  const year = releaseDate ? new Date(releaseDate).getFullYear() : '';\n  const rating = item.vote_average ?? null;\n  const isAvailable = item.isAvailable;\n  \n  const mediaTypeForLink = item.media_type === 'anime' ? 'tv' : item.media_type;\n  const linkTo = playUrl || (searchTerm\n    ? `/media/${mediaTypeForLink}/${item.id}?fromSearch=${encodeURIComponent(searchTerm)}`\n    : `/media/${mediaTypeForLink}/${item.id}`);\n\n  const getImageUrl = (path: string | null | undefined) => {\n    if (!path) return null;\n    if (path.startsWith('/')) {\n      return `https://image.tmdb.org/t/p/w500${path}`;\n    }\n    if (jellyfinUrl && path.startsWith('Items/')) {\n      return `${jellyfinUrl}/${path}`;\n    }\n    return path;\n  };\n\n  const imageUrl = getImageUrl(item.poster_path);\n  \n  // Compute resume time string\n  let resumeTimeString = '';\n  if ((item as any).playback_position_ticks && (item as any).playback_position_ticks > 0) {\n    const resumeSeconds = Math.floor((item as any).playback_position_ticks / 10000000);\n    const resumeMinutes = Math.floor(resumeSeconds / 60);\n    const resumeSecondsOnly = resumeSeconds % 60;\n    resumeTimeString = `${resumeMinutes}m ${resumeSecondsOnly}s`;\n  }\n\n  const cardVariants = {\n    initial: { opacity: 0, y: 20 },\n    animate: { opacity: 1, y: 0 },\n    hover: { y: -4, scale: 1.01 }\n  };\n\n  return (\n    <motion.div\n      variants={cardVariants}\n      initial=\"initial\"\n      animate=\"animate\"\n      whileHover=\"hover\"\n      transition={{ duration: 0.3, ease: \"easeOut\" }}\n      className=\"group\"\n    >\n      <Card className=\"relative overflow-hidden rounded-xl bg-card border border-border/50 transition-all duration-300 h-full shadow-sm hover:shadow-md hover:shadow-black/5\">\n        <Link to={linkTo} className=\"block h-full\" aria-label={title}>\n          {/* Image container avec overlay */}\n          <div className=\"relative aspect-media bg-muted flex items-center justify-center overflow-hidden\">\n            {imageUrl ? (\n              <img\n                src={imageUrl}\n                alt={title}\n                className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\n                loading=\"lazy\"\n                decoding=\"async\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center text-muted-foreground\">\n                <Film className=\"h-12 w-12\" />\n              </div>\n            )}\n            \n            {/* Gradient overlay */}\n            <div className=\"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n\n            {/* Progress bar */}\n            {progress !== undefined && progress > 0 && (\n              <div className=\"absolute bottom-0 left-0 right-0 h-1 bg-muted/50\">\n                <div\n                  className=\"h-full bg-primary transition-all duration-300\"\n                  style={{ width: `${progress}%` }}\n                  aria-hidden=\"true\"\n                />\n              </div>\n            )}\n          </div>\n\n          {/* Content overlay */}\n          <div className=\"absolute inset-0 p-4 flex flex-col justify-end bg-gradient-to-t from-black/90 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-20\">\n            <h3 className=\"font-semibold text-xs line-clamp-2 mb-1.5 text-white transition-colors duration-300\">\n              {title}\n            </h3>\n            \n            <div className=\"flex items-center justify-between text-xs text-white/90\">\n              <span className=\"bg-black/30 backdrop-blur-sm px-1.5 py-0.5 rounded text-xs\">\n                {year}\n              </span>\n              {rating !== null && rating > 0 && (\n                <div className=\"flex items-center gap-1 bg-black/30 backdrop-blur-sm px-1.5 py-0.5 rounded text-xs\">\n                  <Star className=\"h-2.5 w-2.5 text-yellow-400 fill-current\" />\n                  <span className=\"font-medium text-xs\">{rating.toFixed(1)}</span>\n                </div>\n              )}\n            </div>\n\n            {/* Resume badge */}\n            {((item as any).playback_position_ticks || playbackPositionTicks) && (\n              <div className=\"mt-1.5 inline-block bg-primary/90 backdrop-blur-sm text-xs text-primary-foreground px-1.5 py-0.5 rounded text-xs font-medium\">\n                {t('resume_at', { time: resumeTimeString || (() => {\n                  if (playbackPositionTicks && playbackPositionTicks > 0) {\n                    const resumeSeconds = Math.floor(playbackPositionTicks / 10000000);\n                    const resumeMinutes = Math.floor(resumeSeconds / 60);\n                    const resumeSecondsOnly = resumeSeconds % 60;\n                    return `${resumeMinutes}m ${resumeSecondsOnly}s`;\n                  }\n                  return '';\n                })() })}\n              </div>\n            )}\n          </div>\n        </Link>\n        \n        {/* Status badges */}\n        <div className=\"absolute top-2 left-2 z-30\">\n          {isAvailable && (\n            <Badge className=\"bg-success text-success-foreground border-0 shadow-md text-xs px-1.5 py-0.5 hover:bg-success\">\n              <Check className=\"h-2.5 w-2.5 mr-1\" />\n              {t('available')}\n            </Badge>\n          )}\n          {item.isRequested && !isAvailable && (\n            <Badge className=\"bg-warning text-warning-foreground border-0 shadow-md text-xs px-1.5 py-0.5 hover:bg-warning\">\n              <Hourglass className=\"h-2.5 w-2.5 mr-1\" />\n              {t('requested')}\n            </Badge>\n          )}\n        </div>\n        \n        {/* Action buttons */}\n        <div className=\"absolute top-2 right-2 z-30 flex flex-col gap-1.5 opacity-0 group-hover:opacity-100 transition-all duration-300\">\n          {showRemoveButton && onRemove && (\n            <motion.button\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                onRemove(item);\n              }}\n              aria-label={`Retirer ${title} de la liste`}\n              className=\"h-6 w-6 rounded-full bg-destructive/90 backdrop-blur-sm text-destructive-foreground flex items-center justify-center transition-all duration-200 hover:bg-destructive shadow-md\"\n            >\n              <X className=\"h-3 w-3\" />\n            </motion.button>\n          )}\n          \n          {showRequestButton && !isAvailable && !item.isRequested && (\n            <motion.button\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                if (onRequest) onRequest(item);\n              }}\n              aria-label={`${t('request')} ${title}`}\n              className=\"h-8 w-8 rounded-full bg-primary/90 backdrop-blur-sm text-primary-foreground flex items-center justify-center transition-all duration-200 hover:bg-primary shadow-md\"\n            >\n              <Plus className=\"h-4 w-4\" />\n            </motion.button>\n          )}\n\n          {session && (\n            <>\n              <motion.button\n                whileHover={{ scale: 1.1 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={(e) => {\n                  e.preventDefault(); \n                  e.stopPropagation();\n                  isInFavorites(item.id, item.media_type) \n                    ? removeFromFavorites(item.id, item.media_type) \n                    : addToFavorites(item.id, item.media_type);\n                }}\n                aria-label={isInFavorites(item.id, item.media_type) ? t('remove_from_favorites') : t('add_to_favorites')}\n                className={cn(\n                  \"h-8 w-8 rounded-full backdrop-blur-sm flex items-center justify-center transition-all duration-200 shadow-md\",\n                  isInFavorites(item.id, item.media_type)\n                    ? \"bg-destructive/90 text-destructive-foreground hover:bg-destructive\"\n                    : \"bg-background/90 text-foreground hover:bg-background\"\n                )}\n              >\n                <Heart className={cn(\n                  \"h-4 w-4 transition-all duration-200\",\n                  isInFavorites(item.id, item.media_type) && \"fill-current\"\n                )} />\n              </motion.button>\n              \n              <motion.button\n                whileHover={{ scale: 1.1 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={(e) => {\n                  e.preventDefault(); \n                  e.stopPropagation();\n                  isInWatchlist(item.id, item.media_type) \n                    ? removeFromWatchlist(item.id, item.media_type) \n                    : addToWatchlist(item.id, item.media_type);\n                }}\n                aria-label={isInWatchlist(item.id, item.media_type) ? t('remove_from_watchlist') : t('add_to_watchlist')}\n                className={cn(\n                  \"h-8 w-8 rounded-full backdrop-blur-sm flex items-center justify-center transition-all duration-200 shadow-md\",\n                  isInWatchlist(item.id, item.media_type)\n                    ? \"bg-primary/90 text-primary-foreground hover:bg-primary\"\n                    : \"bg-background/90 text-foreground hover:bg-background\"\n                )}\n              >\n                <Bookmark className={cn(\n                  \"h-4 w-4 transition-all duration-200\",\n                  isInWatchlist(item.id, item.media_type) && \"fill-current\"\n                )} />\n              </motion.button>\n            </>\n          )}\n        </div>\n      </Card>\n    </motion.div>\n  );\n};\n\nexport default MediaCard;","import { useState, useEffect } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useSession } from '@/contexts/AuthContext';\r\n\r\nexport const useRequestStatus = (mediaIds: number[]) => {\r\n  const { session } = useSession();\r\n  const [requestedIds, setRequestedIds] = useState<Set<number>>(new Set());\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchRequestStatus = async () => {\r\n      if (!session?.user || mediaIds.length === 0) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setLoading(true);\r\n\r\n      const { data, error } = await supabase\r\n        .from('media_requests')\r\n        .select('tmdb_id')\r\n        .in('tmdb_id', mediaIds)\r\n        .eq('user_id', session.user.id);\r\n\r\n      if (error) {\r\n        console.error('Error fetching request status:', error);\r\n      } else {\r\n        setRequestedIds(new Set(data.map(item => item.tmdb_id)));\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchRequestStatus();\r\n  }, [mediaIds, session]);\r\n\r\n  return { requestedIds, loading };\r\n};","import React, { useEffect, useState } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter, DialogDescription } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useSession } from '@/contexts/AuthContext';\nimport { showSuccess, showError } from '@/utils/toast';\nimport type { MediaItem } from './MediaGrid';\n\ninterface RequestModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  item: MediaItem | null;\n  onSuccess?: () => void;\n}\n\nconst RequestModal: React.FC<RequestModalProps> = ({ open, onOpenChange, item, onSuccess }) => {\n  const { session } = useSession();\n  const [notes, setNotes] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (open && item) {\n      setNotes('');\n    }\n  }, [open, item]);\n\n  const handleSubmit = async () => {\n    if (!session?.user) {\n      showError('Vous devez être connecté pour faire une demande.');\n      return;\n    }\n    if (!item) return;\n\n    setSubmitting(true);\n    try {\n      const { error } = await supabase.from('media_requests').insert({\n        user_id: session.user.id,\n        media_type: item.media_type,\n        tmdb_id: item.id,\n        title: item.title || item.name || '',\n        poster_path: item.poster_path || null,\n        overview: notes || null,\n        requested_at: new Date().toISOString(),\n      });\n\n      if (error) throw error;\n      showSuccess('Demande envoyée !');\n      onOpenChange(false);\n      onSuccess?.();\n    } catch (err: any) {\n      console.error(err);\n      showError(err.message || 'Erreur lors de la demande.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Demander : {item?.title || item?.name}</DialogTitle>\n          <DialogDescription>\n            Vous pouvez ajouter une note ou un commentaire à la demande (optionnel).\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-2\">\n          <div>\n            <label className=\"text-sm text-muted-foreground block mb-1\">Titre</label>\n            <Input value={item?.title || item?.name || ''} readOnly />\n          </div>\n\n          <div>\n            <label className=\"text-sm text-muted-foreground block mb-1\">Notes (optionnel)</label>\n            <Textarea value={notes} onChange={(e) => setNotes(e.target.value)} rows={5} />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"ghost\" onClick={() => onOpenChange(false)} disabled={submitting}>Annuler</Button>\n          <Button onClick={handleSubmit} disabled={submitting}>\n            {submitting ? 'Envoi...' : 'Envoyer la demande'}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default RequestModal;"],"names":["Bookmark","createLucideIcon","Star","useUserList","listType","session","useSession","useTranslation","list","setList","useState","loading","setLoading","fetchList","useCallback","__async","data","error","supabase","showError","newList","item","useEffect","mediaId","mediaType","key","prevList","showSuccess","MediaCard","showRequestButton","onRequest","searchTerm","progress","playUrl","playbackPositionTicks","showRemoveButton","onRemove","t","jellyfinUrl","useJellyfin","addToFavorites","removeFromFavorites","isInFavorites","addToWatchlist","removeFromWatchlist","isInWatchlist","title","releaseDate","year","rating","_a","isAvailable","mediaTypeForLink","linkTo","imageUrl","path","resumeTimeString","resumeSeconds","resumeMinutes","resumeSecondsOnly","cardVariants","jsx","motion","jsxs","Card","Link","Film","Badge","Check","Hourglass","e","X","Plus","Fragment","cn","Heart","useRequestStatus","mediaIds","requestedIds","setRequestedIds","RequestModal","open","onOpenChange","onSuccess","notes","setNotes","submitting","setSubmitting","handleSubmit","err","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Input","Textarea","DialogFooter","Button"],"mappings":"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","x_google_ignoreList":[0,1]}