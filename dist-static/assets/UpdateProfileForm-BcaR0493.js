var k=Object.defineProperty,w=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var p=(a,s,r)=>s in a?k(a,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[s]=r,c=(a,s)=>{for(var r in s||(s={}))E.call(s,r)&&p(a,r,s[r]);if(u)for(var r of u(s))N.call(s,r)&&p(a,r,s[r]);return a},_=(a,s)=>w(a,I(s));var f=(a,s,r)=>new Promise((o,m)=>{var t=n=>{try{i(r.next(n))}catch(d){m(d)}},l=n=>{try{i(r.throw(n))}catch(d){m(d)}},i=n=>n.done?o(n.value):Promise.resolve(n.value).then(t,l);i((r=r.apply(a,s)).next())});import{c as T,u as U,a as q,C as v,n as M,o as z,a2 as B,I as L,p as D,B as H,s as h,d as K,K as O}from"./index-Cw6WSGfP.js";import{j as e}from"./ui-DslYdUPK.js";import{o as P,s as x,u as R,t as V,F as $,a as j,b as g,c as S,d as C,e as b}from"./form-Ba3HuSxU.js";import{I as y}from"./input-B7M3MPRI.js";import{r as F}from"./router-42GXI50n.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=T("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Z=({profile:a})=>{const{t:s,i18n:r}=U(),{session:o}=q(),m=F.useMemo(()=>P({first_name:x().min(1,{message:s("first_name_required")}),last_name:x().min(1,{message:s("last_name_required")})}),[s]),t=R({resolver:V(m),values:{first_name:a.first_name||"",last_name:a.last_name||""}});F.useEffect(()=>{Object.keys(t.formState.errors).length>0&&t.trigger()},[r.language,t]);const l=i=>f(null,null,function*(){const{error:n}=yield h.from("profiles").update(i).eq("id",a.id);if(n)K(s("error_updating_profile"));else if(O(s("profile_updated_successfully")),o!=null&&o.user){const d=o.user.id===a.id;yield h.from("audit_logs").insert({user_id:o.user.id,action:d?"user_profile_updated":"admin_profile_updated",details:{target_user_id:a.id,changes:i}})}});return e.jsxs(v,{children:[e.jsxs(M,{children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"})," ",s("personal_information")]}),e.jsx(L,{children:s("update_your_personal_information")})]}),e.jsx(D,{children:e.jsx($,_(c({},t),{children:e.jsxs("form",{onSubmit:t.handleSubmit(l),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(j,{control:t.control,name:"first_name",render:({field:i})=>e.jsxs(g,{children:[e.jsx(S,{children:s("first_name")}),e.jsx(C,{children:e.jsx(y,c({},i))}),e.jsx(b,{})]})}),e.jsx(j,{control:t.control,name:"last_name",render:({field:i})=>e.jsxs(g,{children:[e.jsx(S,{children:s("last_name")}),e.jsx(C,{children:e.jsx(y,c({},i))}),e.jsx(b,{})]})})]}),e.jsx(H,{type:"submit",disabled:t.formState.isSubmitting,children:s("save_changes")})]})}))})]})};export{Y as S,Z as U};
//# sourceMappingURL=UpdateProfileForm-BcaR0493.js.map
