import{j as s}from"./ui-DslYdUPK.js";import{h as X,r as Y,L as Z}from"./router-42GXI50n.js";import{u as ss}from"./useUserById-Bt1QZYlT.js";import{u as es}from"./useRequestsByUserId-BfTEvivC.js";import{u as R}from"./useUserListDetails-BSyEjQrH.js";import{M as U}from"./MediaGrid-D_gViZ45.js";import{u as as,a as ts,v as ls,w as rs,m as is,a2 as cs,aj as y,ai as w,S as m,C as i,n as o,D as S,E as F,G as I,H as $,o as x,x as c,M as ns,p as h,F as ds,B as D}from"./index-Cw6WSGfP.js";import{T as ms,a as os,b as j,c as u}from"./tabs-SYysrnpz.js";import{B as b}from"./RequestModal-Dh-rgp6A.js";import{T as xs}from"./tv-MG6c8U_0.js";import{R as p}from"./refresh-cw-vuD0gYMD.js";import{f as P}from"./format-ulCIpsJ0.js";import"./vendor-aQ18W7Az.js";import"./streaming-fF1zHaJi.js";import"./utils-D-N2hrcs.js";import"./hourglass-d_tFP0Ab.js";import"./plus-BCI7Qmoy.js";import"./dialog-DtG0Tqk0.js";import"./input-B7M3MPRI.js";import"./textarea-BGhclJcN.js";const Us=()=>{var M;const{userId:r}=X(),{t:e,i18n:q}=as(),{user:a,loading:E}=ss(r),{requests:f,loading:G}=es(r),{session:g}=ts(),[H,z]=Y.useState("profile"),_=q.language==="fr"?ls:rs,C=((M=g==null?void 0:g.user)==null?void 0:M.id)===r,{list:N,loading:n,refetch:W}=R(r||"","favorite"),{list:v,loading:d,refetch:O}=R(r||"","watchlist"),T={pending:{text:e("status_pending"),className:"bg-gray-500/20 text-gray-400 border-gray-500/30"},approved:{text:e("status_approved"),className:"bg-blue-500/20 text-blue-400 border-blue-500/30"},rejected:{text:e("status_rejected"),className:"bg-red-500/20 text-red-400 border-red-500/30"},available:{text:e("status_available"),className:"bg-green-500/20 text-green-400 border-green-500/30"}},Q=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx(m,{className:"h-24 w-24 rounded-full"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{className:"h-8 w-48"}),s.jsx(m,{className:"h-4 w-32"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(4)].map((t,l)=>s.jsx(m,{className:"h-64 w-full"},l))})]});if(E||G||n||d)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(Q,{})});if(!a)return s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:e("user_not_found")});const V=()=>{var t,l;return s.jsxs(i,{className:"h-full",children:[s.jsxs(o,{className:"text-center pb-4",children:[s.jsx("div",{className:"relative mx-auto mb-4",children:s.jsxs(S,{className:"h-24 w-24 border-4 border-background shadow-lg",children:[s.jsx(F,{src:a.avatar_url||I(a.email,160)}),s.jsxs($,{className:"text-3xl",children:[(t=a.first_name)==null?void 0:t.charAt(0),(l=a.last_name)==null?void 0:l.charAt(0)]})]})}),s.jsxs(x,{className:"text-2xl",children:[a.first_name," ",a.last_name]}),s.jsx("p",{className:"text-muted-foreground text-sm",children:a.email}),s.jsxs(c,{variant:"secondary",className:"mt-2",children:[s.jsx(ns,{className:"h-3 w-3 mr-1"}),e("member_since")," ",P(new Date(a.updated_at),"MMMM yyyy",{locale:_})]})]}),s.jsxs(h,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:e("first_name")}),s.jsx("p",{className:"font-medium",children:a.first_name||"-"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:e("last_name")}),s.jsx("p",{className:"font-medium",children:a.last_name||"-"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground text-sm",children:e("email")}),s.jsx("p",{className:"font-medium text-sm",children:a.email})]})]})]})},L=()=>s.jsxs(i,{className:"h-full",children:[s.jsx(o,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(y,{className:"h-5 w-5"}),s.jsx(x,{children:e("media_requests")}),s.jsx(c,{variant:"secondary",children:f.length})]})}),s.jsx(h,{children:f.length>0?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:f.map(t=>{var l,k,A,B;return s.jsx(Z,{to:`/media/${t.media_type}/${t.tmdb_id}`,children:s.jsxs(i,{className:"overflow-hidden group transition-all hover:shadow-lg hover:-translate-y-1",children:[s.jsxs("div",{className:"relative aspect-[2/3]",children:[t.poster_path?s.jsx("img",{src:`https://image.tmdb.org/t/p/w500${t.poster_path}`,alt:t.title,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}):s.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center text-muted-foreground",children:t.media_type==="movie"?s.jsx(ds,{className:"h-12 w-12"}):s.jsx(xs,{className:"h-12 w-12"})}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(c,{className:(l=T[t.status])==null?void 0:l.className,children:(k=T[t.status])==null?void 0:k.text})})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("h4",{className:"font-semibold truncate text-sm",children:t.title}),s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[s.jsxs(S,{className:"h-5 w-5",children:[s.jsx(F,{src:a.avatar_url||I(a.email,80)}),s.jsxs($,{className:"text-[10px]",children:[(A=a.first_name)==null?void 0:A.charAt(0),(B=a.last_name)==null?void 0:B.charAt(0)]})]}),s.jsxs("span",{className:"text-[11px] text-muted-foreground",children:[e("requested_by")," ",a.first_name," ",a.last_name]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:P(new Date(t.requested_at),"d MMM yyyy",{locale:_})})]})]})},t.id)})}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(y,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:e("no_requests_yet")})]})})]}),J=()=>s.jsxs(i,{className:"h-full",children:[s.jsx(o,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w,{className:"h-5 w-5"}),s.jsx(x,{children:e("favorites")}),s.jsx(c,{variant:"secondary",children:N.length})]}),C&&s.jsxs(D,{variant:"outline",size:"sm",onClick:W,disabled:n,className:"flex items-center gap-2",children:[s.jsx(p,{className:`h-4 w-4 ${n?"animate-spin":""}`}),e("refresh")]})]})}),s.jsx(h,{children:n?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(p,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):N.length>0?s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsx(U,{items:N,showRequestButton:!1})}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(w,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:e("no_favorites_yet")})]})})]}),K=()=>s.jsxs(i,{className:"h-full",children:[s.jsx(o,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(b,{className:"h-5 w-5"}),s.jsx(x,{children:e("watchlist")}),s.jsx(c,{variant:"secondary",children:v.length})]}),C&&s.jsxs(D,{variant:"outline",size:"sm",onClick:O,disabled:d,className:"flex items-center gap-2",children:[s.jsx(p,{className:`h-4 w-4 ${d?"animate-spin":""}`}),e("refresh")]})]})}),s.jsx(h,{children:d?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(p,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):v.length>0?s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsx(U,{items:v,showRequestButton:!1})}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(b,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:e("no_watchlist_yet")})]})})]});return s.jsxs(is.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-4xl font-bold tracking-tight mb-2",children:[a.first_name," ",a.last_name]}),s.jsx("p",{className:"text-muted-foreground",children:e("public_profile")})]}),s.jsxs(ms,{value:H,onValueChange:z,className:"space-y-6",children:[s.jsxs(os,{className:"grid w-full grid-cols-2 lg:grid-cols-4",children:[s.jsxs(j,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(cs,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:e("profile")})]}),s.jsxs(j,{value:"requests",className:"flex items-center gap-2",children:[s.jsx(y,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:e("requests")})]}),s.jsxs(j,{value:"favorites",className:"flex items-center gap-2",children:[s.jsx(w,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:e("favorites")})]}),s.jsxs(j,{value:"watchlist",className:"flex items-center gap-2",children:[s.jsx(b,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:e("watchlist")})]})]}),s.jsx(u,{value:"profile",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(V,{}),s.jsx(L,{})]})}),s.jsx(u,{value:"requests",className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.jsx(L,{})})}),s.jsx(u,{value:"favorites",className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.jsx(J,{})})}),s.jsx(u,{value:"watchlist",className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.jsx(K,{})})})]})]})};export{Us as default};
//# sourceMappingURL=UserPublicProfile-CVFGHGL_.js.map
