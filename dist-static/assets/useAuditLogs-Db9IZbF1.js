var m=(n,a,e)=>new Promise((c,u)=>{var l=t=>{try{s(e.next(t))}catch(o){u(o)}},f=t=>{try{s(e.throw(t))}catch(o){u(o)}},s=t=>t.done?c(t.value):Promise.resolve(t.value).then(l,f);s((e=e.apply(n,a)).next())});import{r}from"./router-42GXI50n.js";import{s as h}from"./index-Cw6WSGfP.js";const _=(n,a)=>{const[e,c]=r.useState([]),[u,l]=r.useState(0),[f,s]=r.useState(!0),[t,o]=r.useState(null),i=r.useCallback(()=>m(null,null,function*(){s(!0),o(null);const g=(n-1)*a,b=g+a-1,{data:p,error:d,count:E}=yield h.from("audit_logs").select("*, profiles(*)",{count:"exact"}).order("created_at",{ascending:!1}).range(g,b);d?(console.error("Error fetching audit logs:",d),o(d.message),c([]),l(0)):(c(p||[]),l(E||0)),s(!1)}),[n,a]);return r.useEffect(()=>{i();const g=h.channel("audit-logs-changes").on("postgres_changes",{event:"*",schema:"public",table:"audit_logs"},()=>{i()}).subscribe();return()=>{h.removeChannel(g)}},[i]),{logs:e,loading:f,error:t,totalCount:u,refreshLogs:i}};export{_ as u};
//# sourceMappingURL=useAuditLogs-Db9IZbF1.js.map
