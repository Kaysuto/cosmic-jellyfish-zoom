var I=Object.defineProperty;var p=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var j=(r,s,n)=>s in r?I(r,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[s]=n,f=(r,s)=>{for(var n in s||(s={}))H.call(s,n)&&j(r,n,s[n]);if(p)for(var n of p(s))k.call(s,n)&&j(r,n,s[n]);return r};import{j as e}from"./ui-DslYdUPK.js";import{r as S}from"./router-42GXI50n.js";import{u as L}from"./useAuditLogs-Db9IZbF1.js";import{u as B,v as M,w as R,m as E,C as U,n as q,o as G,I as V,p as F,B as v,t as O,S as i,y as z,D as J,E as K,G as Q,H as W,x as X}from"./index-Cw6WSGfP.js";import{T as N,a as w,b as _,c as d,d as b,e as c}from"./table-BD6NPv27.js";import{A as C,a as y,b as T}from"./alert-C5VW6aHR.js";import{S as Y,a as Z,b as $,c as ee,d as se}from"./select-NjfxA5eB.js";import{C as ae}from"./chevron-left-BG9g9Eau.js";import{T as re}from"./triangle-alert-bjg6MAJf.js";import{I as te}from"./info-CCBm9b8K.js";import{f as ne}from"./format-ulCIpsJ0.js";import"./vendor-aQ18W7Az.js";import"./streaming-fF1zHaJi.js";import"./utils-D-N2hrcs.js";import"./index-Cco2FRbQ.js";const ie=(r,s)=>{const{action:n,details:l}=r,a=f({},l);switch(n){case"user_login_success":return String(s("log_desc_user_login_success",a));case"user_login_failed":return String(s("log_desc_user_login_failed",a));case"user_logout":return String(s("log_desc_user_logout",a));case"incident_updated":return String(s("log_desc_incident_updated",a));case"incident_created":return String(s("log_desc_incident_created",a));case"incident_deleted":return String(s("log_desc_incident_deleted",a));case"service_updated":return String(s("log_desc_service_updated",a));case"service_created":return String(s("log_desc_service_created",a));case"service_deleted":return String(s("log_desc_service_deleted",a));case"maintenance_updated":return String(s("log_desc_maintenance_updated",a));case"maintenance_created":return String(s("log_desc_maintenance_created",a));case"maintenance_deleted":return String(s("log_desc_maintenance_deleted",a));case"user_deleted":return String(s("log_desc_user_deleted",a));case"user_role_changed":return String(s("log_desc_user_role_changed",a));case"admin_mfa_disabled":return String(s("log_desc_admin_mfa_disabled",a));case"user_created_by_admin":return String(s("log_desc_user_created_by_admin",a));case"setting_updated":return String(s("log_desc_setting_updated",a));case"admin_user_details_updated":return String(s("log_desc_admin_user_details_updated",a));case"user_profile_updated":return String(s("log_desc_user_profile_updated",a));case"admin_profile_updated":return String(s("log_desc_admin_profile_updated",a));case"user_email_change_request":return String(s("log_desc_user_email_change_request",a));case"user_password_updated":return String(s("log_desc_user_password_updated",a));case"user_mfa_enabled":return String(s("log_desc_user_mfa_enabled",a));case"user_mfa_disabled":return String(s("log_desc_user_mfa_disabled",a));default:return String(s("log_desc_unknown_action"))}},we=()=>{const{t:r,i18n:s}=B(),[n,l]=S.useState(1),[a,A]=S.useState(10),{logs:m,loading:P,error:x,totalCount:u}=L(n,a),g=s.language==="fr"?M:R,h=Math.ceil(u/a),D=()=>P?e.jsxs(N,{children:[e.jsx(w,{children:e.jsxs(_,{children:[e.jsx(d,{children:e.jsx(i,{className:"h-5 w-24"})}),e.jsx(d,{children:e.jsx(i,{className:"h-5 w-32"})}),e.jsx(d,{children:e.jsx(i,{className:"h-5 w-48"})})]})}),e.jsx(b,{children:[...Array(a)].map((t,o)=>e.jsxs(_,{children:[e.jsx(c,{children:e.jsx(i,{className:"h-5 w-full"})}),e.jsx(c,{children:e.jsx(i,{className:"h-5 w-full"})}),e.jsx(c,{children:e.jsx(i,{className:"h-5 w-full"})})]},o))})]}):x?e.jsxs(C,{variant:"destructive",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx(y,{children:r("error")}),e.jsx(T,{children:x})]}):m.length===0?e.jsxs(C,{children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx(y,{children:r("no_logs_found_title")}),e.jsx(T,{children:r("no_logs_found_desc")})]}):e.jsxs(N,{children:[e.jsx(w,{children:e.jsxs(_,{children:[e.jsx(d,{className:"w-[200px]",children:r("date")}),e.jsx(d,{className:"w-[250px]",children:r("user")}),e.jsx(d,{children:r("description")})]})}),e.jsx(b,{children:m.map(t=>{var o;return e.jsxs(_,{children:[e.jsxs(c,{className:"text-xs whitespace-nowrap",children:[e.jsx("div",{className:"font-medium",children:ne(new Date(t.created_at),"d MMM yyyy, HH:mm:ss",{locale:g})}),e.jsx("div",{className:"text-muted-foreground",children:z(new Date(t.created_at),{locale:g,addSuffix:!0})})]}),e.jsx(c,{children:t.profiles?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(J,{className:"h-8 w-8",children:[e.jsx(K,{src:Q(t.profiles.email)}),e.jsx(W,{children:((o=t.profiles.first_name)==null?void 0:o[0])||"U"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[t.profiles.first_name," ",t.profiles.last_name]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.profiles.email})]})]}):e.jsx("span",{className:"text-muted-foreground italic",children:r("system")})}),e.jsxs(c,{children:[e.jsx("p",{className:"text-sm",children:ie(t,r)}),e.jsx(X,{variant:"outline",className:"mt-1",children:t.action})]})]},t.id)})})]});return e.jsx(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeInOut"},children:e.jsxs(U,{children:[e.jsxs(q,{children:[e.jsx(G,{children:r("audit_logs_title")}),e.jsx(V,{children:r("audit_logs_desc")})]}),e.jsx(F,{children:D()}),u>0&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:r("pagination_total",{total:u})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:r("items_per_page")}),e.jsxs(Y,{value:a.toString(),onValueChange:t=>{A(Number(t)),l(1)},children:[e.jsx(Z,{className:"w-[80px]",children:e.jsx($,{})}),e.jsx(ee,{children:[10,15,20,50,100].map(t=>e.jsx(se,{value:t.toString(),children:t},t))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:r("page_x_of_y",{x:n,y:h})}),e.jsx(v,{variant:"outline",size:"sm",onClick:()=>l(t=>t-1),disabled:n===1,children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(v,{variant:"outline",size:"sm",onClick:()=>l(t=>t+1),disabled:n===h,children:e.jsx(O,{className:"h-4 w-4"})})]})]})]})]})})};export{we as default};
//# sourceMappingURL=Logs-BuXJEsg6.js.map
