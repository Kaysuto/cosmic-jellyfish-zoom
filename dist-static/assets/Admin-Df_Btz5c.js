var V=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var _=(s,r,a)=>r in s?V(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a,y=(s,r)=>{for(var a in r||(r={}))q.call(r,a)&&_(s,a,r[a]);if(D)for(var a of D(r))K.call(r,a)&&_(s,a,r[a]);return s},v=(s,r)=>X(s,Y(r));var S=(s,r,a)=>new Promise((m,i)=>{var n=d=>{try{x(a.next(d))}catch(p){i(p)}},f=d=>{try{x(a.throw(d))}catch(p){i(p)}},x=d=>d.done?m(d.value):Promise.resolve(d.value).then(n,f);x((a=a.apply(s,r)).next())});import{j as e}from"./ui-DslYdUPK.js";import{c as U,u as B,M as Q,U as Z,F as ee,m as u,e as h,V as G,W as J,B as g,X as M,Y as W,Z as H,_ as se,$ as w,a0 as j,z as ae,a1 as te,Q as re,S as ne,D as O,E as I,G as L,H as T,O as ie,a2 as le,a3 as F,a4 as oe,a5 as ce,a6 as de,a7 as me,J as xe,A as ue,f as he,g as ge,h as pe,i as fe,j as je,k as be,l as Ne,s as ye}from"./index-Cw6WSGfP.js";import{N as z,r as o,u as ve,O as we}from"./router-42GXI50n.js";import{W as Ce}from"./wrench-D2m1vaaz.js";import{T as k}from"./triangle-alert-bjg6MAJf.js";import{S as $}from"./settings-Bv5hbbbn.js";import{F as ke}from"./file-text-C8CthVQs.js";import{I as Ae}from"./info-CCBm9b8K.js";import{C as De}from"./circle-check-big-BcW08cDX.js";import{A as _e}from"./index-BvRroZ3g.js";import{A as E}from"./arrow-left-Db81hexG.js";import"./vendor-aQ18W7Az.js";import"./streaming-fF1zHaJi.js";import"./utils-D-N2hrcs.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=U("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=U("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Oe=()=>{const{t:s}=B(),r=[{to:"/admin",label:s("analytics"),icon:Se,exact:!0},{to:"/admin/services",label:s("manage_services"),icon:Ce},{to:"/admin/incidents",label:s("manage_incidents"),icon:k},{to:"/admin/maintenance",label:s("manage_maintenance"),icon:Q},{to:"/admin/users",label:s("manage_users"),icon:Z},{to:"/admin/jellyfin",label:s("jellyfin_tab_title"),icon:ee},{to:"/admin/settings",label:s("settings"),icon:$},{to:"/admin/logs",label:s("logs"),icon:ke}];return e.jsxs(u.nav,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:"w-full",children:[e.jsx("div",{className:"hidden lg:flex items-center gap-1",children:r.map((a,m)=>{const i=a.icon;return e.jsx(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2,delay:m*.05,ease:[.25,.46,.45,.94]},children:e.jsx(z,{to:a.to,end:a.exact,className:({isActive:n})=>h("relative flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",n?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-muted/50 hover:text-foreground"),children:({isActive:n})=>e.jsxs(e.Fragment,{children:[e.jsx(i,{className:h("h-4 w-4 transition-colors duration-200",n?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground")}),e.jsx("span",{className:h("transition-colors duration-200",n?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground"),children:a.label}),a.badge&&e.jsx(u.span,{initial:{scale:0},animate:{scale:1},className:"px-1.5 py-0.5 text-xs bg-primary/20 text-primary rounded-full",children:a.badge})]})})},a.to)})}),e.jsx("div",{className:"lg:hidden",children:e.jsx("div",{className:"flex items-center gap-1 overflow-x-auto pb-2 scrollbar-hide",children:r.map((a,m)=>{const i=a.icon;return e.jsx(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2,delay:m*.05,ease:[.25,.46,.45,.94]},className:"flex-shrink-0",children:e.jsx(z,{to:a.to,end:a.exact,className:({isActive:n})=>h("relative flex flex-col items-center gap-1 px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 min-w-[60px]",n?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-muted/50 hover:text-foreground"),children:({isActive:n})=>e.jsxs(e.Fragment,{children:[e.jsx(i,{className:h("h-4 w-4 transition-colors duration-200",n?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground")}),e.jsx("span",{className:h("text-center leading-tight transition-colors duration-200",n?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground"),children:a.label})]})})},a.to)})})})]})},R="admin-notifications",P=()=>{const[s,r]=o.useState([]),a=o.useCallback(()=>{const t=[{id:"1",title:"Nouvel incident détecté",message:"Le service Jellyfin a rencontré un problème de connectivité",type:"warning",timestamp:new Date(Date.now()-18e5),read:!1},{id:"2",title:"Maintenance planifiée",message:"Une maintenance est prévue pour demain à 2h du matin",type:"info",timestamp:new Date(Date.now()-72e5),read:!1},{id:"3",title:"Service restauré",message:"Le service de base de données est maintenant opérationnel",type:"success",timestamp:new Date(Date.now()-144e5),read:!0}];r(t),m(t)},[]),m=o.useCallback(t=>{try{localStorage.setItem(R,JSON.stringify(t))}catch(c){console.error("Erreur lors de la sauvegarde des notifications:",c)}},[]),i=o.useCallback(t=>{r(t),m(t)},[m]);o.useEffect(()=>{const t=localStorage.getItem(R);if(t)try{const l=JSON.parse(t).map(A=>v(y({},A),{timestamp:new Date(A.timestamp)}));r(l)}catch(c){console.error("Erreur lors du chargement des notifications:",c),a()}else a()},[a]);const n=o.useMemo(()=>s.filter(t=>!t.read).length,[s]),f=o.useCallback(t=>{const c=s.map(l=>l.id===t?v(y({},l),{read:!0}):l);i(c)},[s,i]),x=o.useCallback(()=>{const t=s.map(c=>v(y({},c),{read:!0}));i(t)},[s,i]),d=o.useCallback(t=>{const c=s.filter(l=>l.id!==t);i(c)},[s,i]),p=o.useCallback(()=>{i([])},[i]),C=o.useCallback(t=>{switch(t){case"warning":return e.jsx(k,{className:"h-4 w-4 text-yellow-500"});case"success":return e.jsx(De,{className:"h-4 w-4 text-green-500"});case"error":return e.jsx(k,{className:"h-4 w-4 text-red-500"});case"info":default:return e.jsx(Ae,{className:"h-4 w-4 text-blue-500"})}},[]),b=o.useCallback(t=>{switch(t){case"warning":return"border-yellow-500/20 bg-yellow-500/5";case"success":return"border-green-500/20 bg-green-500/5";case"error":return"border-red-500/20 bg-red-500/5";case"info":default:return"border-blue-500/20 bg-blue-500/5"}},[]),N=o.useCallback(t=>{const l=Math.floor((new Date().getTime()-t.getTime())/(1e3*60));return l<1?"À l'instant":l<60?`Il y a ${l}min`:l<1440?`Il y a ${Math.floor(l/60)}h`:t.toLocaleDateString("fr-FR")},[]);return e.jsxs(G,{modal:!1,children:[e.jsx(J,{asChild:!0,children:e.jsxs(g,{variant:"ghost",size:"sm",className:"relative p-2",children:[e.jsx(M,{className:"h-4 w-4"}),n>0&&e.jsx("div",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-white",children:n>9?"9+":n})})]})}),e.jsxs(W,{className:"w-80 max-h-96 overflow-y-auto",align:"end",forceMount:!0,children:[e.jsxs(H,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-1",children:[n>0&&e.jsx(g,{variant:"ghost",size:"sm",onClick:x,className:"h-6 px-2 text-xs",children:"Tout marquer comme lu"}),s.length>0&&e.jsx(g,{variant:"ghost",size:"sm",onClick:p,className:"h-6 px-2 text-xs text-red-500 hover:text-red-600 hover:bg-red-50",children:e.jsx(se,{className:"h-3 w-3"})})]})]}),e.jsx(w,{}),e.jsx(_e,{children:s.length===0?e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"py-8 text-center",children:[e.jsx(M,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune notification"})]}):s.map((t,c)=>e.jsx(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:c*.05},children:e.jsx(j,{className:h("flex flex-col items-start gap-2 p-3 cursor-pointer border-l-4 group",b(t.type),!t.read&&"bg-muted/30"),onClick:()=>f(t.id),children:e.jsxs("div",{className:"flex items-start justify-between w-full",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[C(t.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:h("text-sm font-medium line-clamp-1",!t.read&&"font-semibold"),children:t.title}),!t.read&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mt-1",children:t.message}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[e.jsx(ae,{className:"h-3 w-3"}),N(t.timestamp)]})]})]}),e.jsx(g,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-100 hover:text-red-600",onClick:l=>{l.stopPropagation(),d(t.id)},children:e.jsx(te,{className:"h-3 w-3"})})]})})},t.id))}),s.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx(j,{className:"text-center text-xs text-muted-foreground cursor-pointer",children:"Voir toutes les notifications"})]})]})]})},Ve=()=>{var b,N;const{t:s}=B(),r=ve(),{profile:a,loading:m}=re(),[i,n]=o.useState(!1),[f,x]=o.useState(!1),d=()=>{n(!0)},p=()=>S(null,null,function*(){yield ye.auth.signOut(),r("/")}),C=[{to:"/admin",label:s("analytics"),icon:"📊"},{to:"/admin/services",label:s("manage_services"),icon:"🔧"},{to:"/admin/incidents",label:s("manage_incidents"),icon:"⚠️"},{to:"/admin/maintenance",label:s("manage_maintenance"),icon:"📅"},{to:"/admin/users",label:s("manage_users"),icon:"👥"},{to:"/admin/jellyfin",label:s("jellyfin_tab_title"),icon:"🎬"},{to:"/admin/settings",label:s("settings"),icon:"⚙️"},{to:"/admin/logs",label:s("logs"),icon:"📋"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20",children:[e.jsx(u.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"sticky top-0 z-50 w-full border-b border-border/50 bg-background/80 backdrop-blur-xl",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex-1 hidden lg:block",children:e.jsx(Oe,{})}),e.jsxs(u.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"hidden lg:flex items-center gap-3",children:[e.jsx(g,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:"/",className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Retour"})]})}),e.jsx(P,{}),m?e.jsx(ne,{className:"h-10 w-10 rounded-full"}):a?e.jsxs(G,{modal:!1,children:[e.jsx(J,{asChild:!0,children:e.jsxs(g,{variant:"ghost",className:"flex items-center gap-3 px-2 py-1 h-auto rounded-lg",children:[e.jsxs(O,{className:"h-9 w-9",children:[e.jsx(I,{src:a.avatar_url||L(a.email)}),e.jsx(T,{className:"bg-gradient-to-br from-primary/20 to-secondary/20 text-primary font-semibold",children:(b=a.first_name)==null?void 0:b.charAt(0)})]}),e.jsxs("div",{className:"hidden sm:flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:a.first_name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Administrateur"})]}),e.jsx(ie,{className:"h-4 w-4 text-muted-foreground hidden sm:block"})]})}),e.jsxs(W,{className:"w-64",align:"end",forceMount:!0,children:[e.jsx(H,{className:"font-normal",children:e.jsx("div",{className:"flex flex-col space-y-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(O,{className:"h-12 w-12",children:[e.jsx(I,{src:a.avatar_url||L(a.email)}),e.jsx(T,{className:"bg-gradient-to-br from-primary/20 to-secondary/20 text-primary font-semibold",children:(N=a.first_name)==null?void 0:N.charAt(0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium leading-none",children:[a.first_name," ",a.last_name]}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground mt-1",children:a.email})]})]})})}),e.jsx(w,{}),e.jsx(j,{asChild:!0,children:e.jsxs("a",{href:"/profile",className:"w-full cursor-pointer flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:"Mon Profil"})]})}),e.jsx(j,{asChild:!0,children:e.jsxs("a",{href:"/admin/settings",className:"w-full cursor-pointer flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:s("settings")})]})}),e.jsx(w,{}),e.jsxs(j,{onClick:d,className:"text-destructive cursor-pointer flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:s("logout")})]})]})]}):null]}),e.jsxs("div",{className:"lg:hidden flex items-center gap-2",children:[e.jsx(P,{}),e.jsxs(oe,{open:f,onOpenChange:x,children:[e.jsx(ce,{asChild:!0,children:e.jsxs(g,{variant:"ghost",size:"icon",className:"p-2 rounded-lg hover:bg-accent focus-visible:outline-none focus-visible:ring-0","aria-label":"Ouvrir le menu d'administration",children:[e.jsx(de,{className:"h-6 w-6"}),e.jsx("span",{className:"sr-only",children:"Ouvrir le menu admin"})]})}),e.jsx(me,{side:"right",className:"bg-background/95 backdrop-blur-xl border-l border-border/50 w-[320px]",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"px-4 pt-6 pb-4 border-b border-border/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-primary/10 to-secondary/10",children:e.jsx(Me,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Panel Admin"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestion de l'infrastructure"})]})]})}),e.jsxs("div",{className:"flex-grow p-4 space-y-2 overflow-y-auto",children:[C.map(t=>e.jsxs("a",{href:t.to,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium transition-all duration-300 rounded-md text-muted-foreground hover:text-foreground hover:bg-accent",onClick:()=>x(!1),children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{children:t.label})]},t.to)),e.jsx("div",{className:"border-t border-border/50 my-4"}),e.jsx("div",{className:"px-2 text-xs text-muted-foreground uppercase font-semibold tracking-wider mb-2",children:"Actions"}),e.jsxs("a",{href:"/",className:"flex items-center gap-3 px-3 py-2 text-sm font-medium transition-all duration-300 rounded-md text-muted-foreground hover:text-foreground hover:bg-accent",onClick:()=>x(!1),children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Retour au site"})]})]}),e.jsx("div",{className:"px-4 pb-6",children:e.jsxs(g,{onClick:()=>{x(!1),d()},variant:"destructive",className:"w-full",children:[e.jsx(F,{className:"mr-3 h-5 w-5"}),s("logout")]})})]})})]})]})]})})}),e.jsx(u.main,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"flex-1",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(we,{})})}),e.jsx(u.footer,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},className:"w-full border-t border-border/50 bg-background/50 backdrop-blur-sm",children:e.jsx(xe,{})}),e.jsx(ue,{open:i,onOpenChange:n,children:e.jsxs(he,{children:[e.jsxs(ge,{children:[e.jsx(pe,{children:s("confirm_logout_title")}),e.jsx(fe,{children:s("confirm_logout_description")})]}),e.jsxs(je,{children:[e.jsx(be,{children:s("cancel")}),e.jsx(Ne,{onClick:p,className:"bg-destructive hover:bg-destructive/90",children:s("logout")})]})]})})]})};export{Ve as default};
//# sourceMappingURL=Admin-Df_Btz5c.js.map
