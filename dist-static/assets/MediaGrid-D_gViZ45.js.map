{"version":3,"file":"MediaGrid-D_gViZ45.js","sources":["../../src/components/catalog/MediaGrid.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport MediaCard from './MediaCard';\nimport RequestModal from './RequestModal';\nimport { useRequestStatus } from '@/hooks/useRequestStatus';\n\nexport interface MediaItem {\n  id: number;\n  title?: string;\n  name?: string;\n  poster_path?: string | null;\n  release_date?: string;\n  first_air_date?: string;\n  media_type: 'movie' | 'tv' | 'anime';\n  vote_average?: number;\n  networks?: { name: string }[];\n  isAvailable?: boolean;\n  isSoon?: boolean;\n  seasonNumber?: number;\n  episodeNumber?: number;\n  episodeName?: string;\n  isRequested?: boolean;\n  genre_ids?: number[];\n  genres?: { id: number; name: string }[];\n  origin_country?: string[];\n  origin_countries?: string[];\n}\n\ninterface MediaGridProps {\n  items: MediaItem[];\n  showRequestButton?: boolean;\n  searchTerm?: string;\n  onRequest?: (item: MediaItem) => void;\n}\n\nconst MediaGrid: React.FC<MediaGridProps> = ({ items, showRequestButton = true, searchTerm, onRequest }) => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedItem, setSelectedItem] = useState<MediaItem | null>(null);\n\n  const mediaIds = useMemo(() => items.map(item => item.id), [items]);\n  const { requestedIds: initialRequestedIds } = useRequestStatus(mediaIds);\n  const [newlyRequestedIds, setNewlyRequestedIds] = useState<Set<number>>(new Set());\n\n  const requestedIds = useMemo(() => {\n    return new Set([...Array.from(initialRequestedIds), ...Array.from(newlyRequestedIds)]);\n  }, [initialRequestedIds, newlyRequestedIds]);\n\n  const handleRequest = (item: MediaItem) => {\n    if (onRequest) {\n      onRequest(item);\n    } else {\n      setSelectedItem(item);\n      setIsModalOpen(true);\n    }\n  };\n\n  const onModalSuccess = () => {\n    if (selectedItem) {\n      setNewlyRequestedIds(prev => new Set(prev).add(selectedItem.id));\n    }\n  }\n\n  return (\n    <>\n      <motion.div\n        layout\n        className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 gap-4\"\n      >\n        {items.map((item, index) => (\n          <motion.div\n            key={`${item.id}-${item.media_type}`}\n            layout\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.5, delay: index * 0.03, ease: \"easeInOut\" }}\n          >\n            <MediaCard\n              item={{ ...item, isRequested: requestedIds.has(item.id) }}\n              onRequest={handleRequest}\n              showRequestButton={showRequestButton}\n              searchTerm={searchTerm}\n            />\n          </motion.div>\n        ))}\n      </motion.div>\n      \n      {!onRequest && (\n        <RequestModal\n          open={isModalOpen}\n          onOpenChange={setIsModalOpen}\n          item={selectedItem}\n          onSuccess={onModalSuccess}\n        />\n      )}\n    </>\n  );\n};\n\nexport default MediaGrid;"],"names":["MediaGrid","items","showRequestButton","searchTerm","onRequest","isModalOpen","setIsModalOpen","useState","selectedItem","setSelectedItem","mediaIds","useMemo","item","initialRequestedIds","useRequestStatus","newlyRequestedIds","setNewlyRequestedIds","requestedIds","handleRequest","onModalSuccess","prev","jsxs","Fragment","jsx","motion","index","MediaCard","__spreadProps","__spreadValues","RequestModal"],"mappings":"gmBAmCA,MAAMA,EAAsC,CAAC,CAAE,MAAAC,EAAO,kBAAAC,EAAoB,GAAM,WAAAC,EAAY,UAAAC,KAAgB,CAC1G,KAAM,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAS,EAAK,EAC9C,CAACC,EAAcC,CAAe,EAAIF,EAAAA,SAA2B,IAAI,EAEjEG,EAAWC,EAAAA,QAAQ,IAAMV,EAAM,IAAIW,GAAQA,EAAK,EAAE,EAAG,CAACX,CAAK,CAAC,EAC5D,CAAE,aAAcY,GAAwBC,EAAiBJ,CAAQ,EACjE,CAACK,EAAmBC,CAAoB,EAAIT,EAAAA,SAAsB,IAAI,GAAK,EAE3EU,EAAeN,EAAAA,QAAQ,IACpB,IAAI,IAAI,CAAC,GAAG,MAAM,KAAKE,CAAmB,EAAG,GAAG,MAAM,KAAKE,CAAiB,CAAC,CAAC,EACpF,CAACF,EAAqBE,CAAiB,CAAC,EAErCG,EAAiBN,GAAoB,CACrCR,EACFA,EAAUQ,CAAI,GAEdH,EAAgBG,CAAI,EACpBN,EAAe,EAAI,EAEvB,EAEMa,EAAiB,IAAM,CACvBX,GACFQ,EAAqBI,GAAQ,IAAI,IAAIA,CAAI,EAAE,IAAIZ,EAAa,EAAE,CAAC,CAEnE,EAEA,OACEa,EAAAA,KAAAC,WAAA,CACE,SAAA,CAAAC,EAAAA,IAACC,EAAO,IAAP,CACC,OAAM,GACN,UAAU,sEAET,SAAAvB,EAAM,IAAI,CAACW,EAAMa,IAChBF,EAAAA,IAACC,EAAO,IAAP,CAEC,OAAM,GACN,QAAS,CAAE,QAAS,EAAG,EAAG,EAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,KAAM,CAAE,QAAS,CAAA,EACjB,WAAY,CAAE,SAAU,GAAK,MAAOC,EAAQ,IAAM,KAAM,WAAA,EAExD,SAAAF,EAAAA,IAACG,EAAA,CACC,KAAMC,EAAAC,EAAA,GAAKhB,GAAL,CAAW,YAAaK,EAAa,IAAIL,EAAK,EAAE,CAAA,GACtD,UAAWM,EACX,kBAAAhB,EACA,WAAAC,CAAA,CAAA,CACF,EAZK,GAAGS,EAAK,EAAE,IAAIA,EAAK,UAAU,EAAA,CAcrC,CAAA,CAAA,EAGF,CAACR,GACAmB,EAAAA,IAACM,EAAA,CACC,KAAMxB,EACN,aAAcC,EACd,KAAME,EACN,UAAWW,CAAA,CAAA,CACb,EAEJ,CAEJ"}