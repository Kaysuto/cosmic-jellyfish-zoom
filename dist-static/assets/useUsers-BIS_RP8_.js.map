{"version":3,"file":"useUsers-BIS_RP8_.js","sources":["../../src/hooks/useUsers.ts"],"sourcesContent":["import { useState, useEffect, useCallback, useMemo } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Profile } from './useProfile';\n\nexport const useUsers = () => {\n  const [users, setUsers] = useState<Profile[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  const fetchUsers = useCallback(async () => {\n    setLoading(true);\n    const { data, error } = await supabase\n      .from('profiles')\n      .select('*')\n      .order('updated_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching users:', error);\n      setUsers([]);\n    } else {\n      setUsers(data as Profile[] || []);\n    }\n    setLoading(false);\n  }, []);\n\n  useEffect(() => {\n    fetchUsers();\n  }, [fetchUsers]);\n\n  // Mémoriser les données calculées pour éviter les re-renders\n  const activeUsers = useMemo(() => \n    users.filter(user => user.is_active !== false), \n    [users]\n  );\n\n  const adminUsers = useMemo(() => \n    users.filter(user => user.role === 'admin'), \n    [users]\n  );\n\n  const totalUsers = useMemo(() => users.length, [users]);\n\n  return { \n    users, \n    loading, \n    refreshUsers: fetchUsers,\n    activeUsers,\n    adminUsers,\n    totalUsers\n  };\n};"],"names":["useUsers","users","setUsers","useState","loading","setLoading","fetchUsers","useCallback","__async","data","error","supabase","useEffect","activeUsers","useMemo","user","adminUsers","totalUsers"],"mappings":"yRAIO,MAAMA,EAAW,IAAM,CAC5B,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAoB,CAAA,CAAE,EAC1C,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAErCG,EAAaC,EAAAA,YAAY,IAAYC,EAAA,sBACzCH,EAAW,EAAI,EACf,KAAM,CAAE,KAAAI,EAAM,MAAAC,CAAA,EAAU,MAAMC,EAC3B,KAAK,UAAU,EACf,OAAO,GAAG,EACV,MAAM,aAAc,CAAE,UAAW,GAAO,EAEvCD,GACF,QAAQ,MAAM,wBAAyBA,CAAK,EAC5CR,EAAS,CAAA,CAAE,GAEXA,EAASO,GAAqB,EAAE,EAElCJ,EAAW,EAAK,CAClB,GAAG,CAAA,CAAE,EAELO,EAAAA,UAAU,IAAM,CACdN,EAAA,CACF,EAAG,CAACA,CAAU,CAAC,EAGf,MAAMO,EAAcC,EAAAA,QAAQ,IAC1Bb,EAAM,OAAOc,GAAQA,EAAK,YAAc,EAAK,EAC7C,CAACd,CAAK,CAAA,EAGFe,EAAaF,EAAAA,QAAQ,IACzBb,EAAM,OAAOc,GAAQA,EAAK,OAAS,OAAO,EAC1C,CAACd,CAAK,CAAA,EAGFgB,EAAaH,EAAAA,QAAQ,IAAMb,EAAM,OAAQ,CAACA,CAAK,CAAC,EAEtD,MAAO,CACL,MAAAA,EACA,QAAAG,EACA,aAAcE,EACd,YAAAO,EACA,WAAAG,EACA,WAAAC,CAAA,CAEJ"}