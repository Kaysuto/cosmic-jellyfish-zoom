{"version":3,"file":"UpdateProfileForm-BcaR0493.js","sources":["../../node_modules/lucide-react/dist/esm/icons/shield-check.js","../../src/components/admin/profile/UpdateProfileForm.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ShieldCheck = createLucideIcon(\"ShieldCheck\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { ShieldCheck as default };\n//# sourceMappingURL=shield-check.js.map\n","import { useTranslation } from 'react-i18next';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { supabase } from '@/integrations/supabase/client';\nimport { showSuccess, showError } from '@/utils/toast';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { User } from 'lucide-react';\nimport { Profile } from '@/hooks/useProfile';\nimport { useMemo, useEffect } from 'react';\nimport { useSession } from '@/contexts/AuthContext';\n\ninterface UpdateProfileFormProps {\n  profile: Profile;\n}\n\nconst UpdateProfileForm = ({ profile }: UpdateProfileFormProps) => {\n  const { t, i18n } = useTranslation();\n  const { session } = useSession();\n\n  const profileSchema = useMemo(() => z.object({\n    first_name: z.string().min(1, { message: t('first_name_required') }),\n    last_name: z.string().min(1, { message: t('last_name_required') }),\n  }), [t]);\n\n  const form = useForm<z.infer<typeof profileSchema>>({\n    resolver: zodResolver(profileSchema),\n    values: { first_name: profile.first_name || '', last_name: profile.last_name || '' },\n  });\n\n  useEffect(() => {\n    if (Object.keys(form.formState.errors).length > 0) form.trigger();\n  }, [i18n.language, form]);\n\n  const onSubmit = async (values: z.infer<typeof profileSchema>) => {\n    const { error } = await supabase.from('profiles').update(values).eq('id', profile.id);\n    if (error) {\n      showError(t('error_updating_profile'));\n    } else {\n      showSuccess(t('profile_updated_successfully'));\n      if (session?.user) {\n        const isSelfUpdate = session.user.id === profile.id;\n        await supabase.from('audit_logs').insert({\n          user_id: session.user.id,\n          action: isSelfUpdate ? 'user_profile_updated' : 'admin_profile_updated',\n          details: {\n            target_user_id: profile.id,\n            changes: values\n          }\n        });\n      }\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\"><User className=\"h-5 w-5\" /> {t('personal_information')}</CardTitle>\n        <CardDescription>{t('update_your_personal_information')}</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <FormField control={form.control} name=\"first_name\" render={({ field }) => (<FormItem><FormLabel>{t('first_name')}</FormLabel><FormControl><Input {...field} /></FormControl><FormMessage /></FormItem>)} />\n              <FormField control={form.control} name=\"last_name\" render={({ field }) => (<FormItem><FormLabel>{t('last_name')}</FormLabel><FormControl><Input {...field} /></FormControl><FormMessage /></FormItem>)} />\n            </div>\n            <Button type=\"submit\" disabled={form.formState.isSubmitting}>{t('save_changes')}</Button>\n          </form>\n        </Form>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default UpdateProfileForm;"],"names":["ShieldCheck","createLucideIcon","UpdateProfileForm","profile","t","i18n","useTranslation","session","useSession","profileSchema","useMemo","z.object","z.string","form","useForm","zodResolver","useEffect","onSubmit","values","__async","error","supabase","showError","showSuccess","isSelfUpdate","Card","jsxs","CardHeader","CardTitle","jsx","User","CardDescription","CardContent","Form","__spreadProps","__spreadValues","FormField","field","FormItem","FormLabel","FormControl","Input","FormMessage","Button"],"mappings":"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","x_google_ignoreList":[0]}