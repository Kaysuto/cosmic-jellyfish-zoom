var f=(o,i,s)=>new Promise((t,e)=>{var a=n=>{try{l(s.next(n))}catch(u){e(u)}},c=n=>{try{l(s.throw(n))}catch(u){e(u)}},l=n=>n.done?t(n.value):Promise.resolve(n.value).then(a,c);l((s=s.apply(o,i)).next())});import{r}from"./router-42GXI50n.js";import{s as m}from"./index-Cw6WSGfP.js";const p=()=>{const[o,i]=r.useState([]),[s,t]=r.useState(!0),e=r.useCallback(()=>f(null,null,function*(){t(!0);const{data:a,error:c}=yield m.from("scheduled_maintenances").select("*, services(name)").order("start_time",{ascending:!1});c?console.error("Error fetching maintenances:",c):i(a||[]),t(!1)}),[]);return r.useEffect(()=>{e();const a=m.channel("maintenances-changes").on("postgres_changes",{event:"*",schema:"public",table:"scheduled_maintenances"},()=>{e()}).subscribe();return()=>{m.removeChannel(a)}},[e]),{maintenances:o,loading:s,refreshMaintenances:e}};export{p as u};
//# sourceMappingURL=useMaintenances-55czmzqe.js.map
